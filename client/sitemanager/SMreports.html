<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Vaccin8</title>
        <link rel="stylesheet" type="text/css" href="../assets/stylesheet/style.css" />
		<link rel="stylesheet" type="text/css" href="../assets/stylesheet/input.css" />
		<link rel="icon" type="image/x-icon" href="../assets/image/Favicon.png">
		<script src="../assets/javascript/nav.js"></script>
		<script src="../assets/javascript/index.js"></script>
	</head>
	<body>
		<header>
			<div id="header-title">VACCIN8</div>
			<div id="header-links">
				<a href="#" id="myusername"></a>
			</div>
		</header>
		<main>
			<div style="margin-top: 6rem;" class="page active" data-timeline="1">
				<h1>Reports</h1>

				<section centered>
					<label>
						<div class="SMinput-label">
							Type of report
						</div>
						<select id="report-select-dropdown" onchange="changeFunc();">
							<option value="0" selected disabled>Choose an report type</option>
							<option value="1">Appointment Information</option>
							<option value="2">Vaccination Information</option>
							<option value="3">Adverse Reaction</option>
						</select>
					</label>
				</section>

				<script>

					function changeFunc() {
						var selectBox = document.getElementById("report-select-dropdown");
						var selectedValue = selectBox.options[selectBox.selectedIndex].value;

						if (selectedValue) {
							goToPageIndex(selectedValue);
						}
					} 
					
					</script>

				<section centered>
					<button unfilled type="button" onclick="history.back()">Return to dashboard</button>
				</section>
        	</div>

			<div class="page" data-timeline="2">
				<a href="SMreports.html" style="margin-left: 8rem;">&#8249; Return to Reports</a>
				<h1>Appointment Information</h1>

				<div>
					<label>
						<div class="input-label2">
							Start Date
						</div>
						<input type="date" id="date-of-start" onchange="load()"/>
					</label>
					<label>
						<div class="input-label2">
							End Date
						</div>
						<input type="date" id="date-of-end" onchange="load()"/>
					</label>

					<label>
						<div class="input-label2">
							Export As:
						</div>
						<select id="report-select-dropdown">
							<option value="0" selected disabled>Choose an export type</option>
							<option value="1">PDF</option>
							<option value="2">CSV</option>
						</select>
					</label>
				</div>

				<br>

				<table id="reporttable">
					<thead>
						<th>Day</th>
						<th>Site Location</th>
						<th>Appointment Status</th>
					</thead>
					<tbody id="tbody">
					</tbody>
				</table>
				<script>
					function load() {

						apiGet("/api/reports/activityByLocation/totalPatients", {
						startDate: id("date-of-start").value,
						endDate: id("date-of-end").value,
					}).then(accts => {
						tbody.innerHTML = "";
						for(const acct of accts) {
							tbody.appendChild(element("tr", {},
								element("td", {}, acct.apptDate),
								element("td", {}, acct.locationName),
								element("td", {}, acct.apptStatus)
							));
						}
					});
					}

				</script>
			</div>

			<div class="page" data-timeline="3">
				<a href="SMreports.html" style="margin-left: 8rem;">&#8249; Return to Reports</a>
				<h1>Vaccination Information</h1>
				<div>
					<label>
						<div class="input-label2">
							Start Date
						</div>
						<input type="date" id="date-of-start" />
					</label>
					<label>
						<div class="input-label2">
							End Date
						</div>
						<input type="date" id="date-of-end" />
					</label>

					<label>
						<div class="input-label2">
							Export As:
						</div>
						<select id="report-select-dropdown">
							<option value="0" selected disabled>Choose an export type</option>
							<option value="1">PDF</option>
							<option value="2">CSV</option>
						</select>
					</label>
				</div>

				<br>
				<table id="reporttable">
					<thead>
						<th>Day</th>
						<th>Vaccine Type</th>
						<th>Appointment Status</th>
					</thead>
					<tbody id="tbody">
					</tbody>
				</table>
				<script>
					apiGet("/api/reports/activityByLocation/totalByManufacturer").then(accts => {
						for(const acct of accts) {
							tbody.appendChild(element("tr", {},
								element("td", {}, acct.apptDate),
								element("td", {}, acct.campaignVaccID + ""),
								element("td", {}, acct.apptStatus)
							));
						}
					});
				</script>

			</div>

			<div class="page" data-timeline="4">
				<a href="SMreports.html" style="margin-left: 8rem;">&#8249; Return to Reports</a>
				<h1>Adverse Reaction</h1>

				<div>
					<label>
						<div class="input-label2">
							Start Date
						</div>
						<input type="date" id="date-of-start" />
					</label>
					<label>
						<div class="input-label2">
							End Date
						</div>
						<input type="date" id="date-of-end" />
					</label>

					<label>
						<div class="input-label2">
							Export As:
						</div>
						<select id="report-select-dropdown">
							<option value="0" selected disabled>Choose an export type</option>
							<option value="1">PDF</option>
							<option value="2">CSV</option>
						</select>
					</label>
				</div>

				<br>

				<table id="reporttable">
					<thead>
						<th>Day</th>
						<th>Patient ID</th>
						<th>Patient Name</th>
						<th>Vaccine Type</th>
						<th>Vaccine Manifacturer</th>
						<th>Vaccine Dose</th>
						<th>Reaction</th>
					</thead>
					<tbody id="tbody">
					</tbody>
				</table>

				<script>
					apiGet("/api/reports/adverseReactions").then(accts => {
						for(const acct of accts) {
							tbody.appendChild(element("tr", {},
								element("td", {}, acct.apptDate),
								element("td", {}, acct.patientID + ""),
								element("td", {}, acct.firstName + " " + acct.lastName),
								element("td", {}, acct.campaignVaccID + ""),
								element("td", {}, acct.manufacturer),
								element("td", {}, acct.vaccineDose),
								element("td", {}, acct.advReaction)
							));
						}
					});
				</script>
			</div>
		</main>
    </body>
</html>